<% function f_currency(number) { return new Intl.NumberFormat("vi-VN", { style: "currency", currency: "VND" }).format(number * 1e3); } %>
<section class="container-flush mx-auto">
  <div class="product-a">
    <div class="product-b row mx-auto lg:max-w-7xl">
      <h2 class="fs-2 fw-bold" style="letter-spacing: -0.025em">Products</h2>
      <div class="product-c gy-4 gx-3 gx-xl-4 row">
        <!-- Product go here -->
        <% for (prod of products){ %>
        <div class="product-d col-12 col-sm-6 col-lg-3 position-relative">
          <div class="product-e position-relative w-100 overflow-hidden rounded-3">
            <img class="h-100 w-100" src="/assets/img/<%= prod.id %>.png" alt="<%= prod.description %>" />
            <div class="position-absolute bottom-0 start-0 w-100 d-flex z-20"><a class="bg-dark text-white p-3 fw-semibold flex-grow-1 border-end text-center" href="/product/<%= prod.id %>">Details</a><button class="bg-dark text-white p-3 fw-semibold flex-grow-1" type="button" onclick="addtoCart(event , '<%= prod.id %>')">Add To Cart</button></div>
          </div>
          <div class="mt-1 d-flex justify-content-between">
            <div class="">
              <h3 class="fs-4 text-decoration-none">
                <p class="text-primary text-decoration-none text-uppercase"><%= prod.id %><span class="position-absolute inset-0"></span></p>
              </h3>
              <p class="mt-0 text-secondary"><%= prod.brand %></p>
            </div>
            <p class="font-medium text-primary"><%= f_currency(prod.price) %></p>
            <a class="position-absolute w-100 h-100 top-0 left-0 z-10" href="/product/<%= prod.id %>"></a>
          </div>
        </div>
        <% } %>
        <!-- Product go here -->
      </div>
    </div>
  </div>
  <div>
    <ul class="pagination justify-content-center">
      <% if (paginate.currentPage == 1) { %>
      <li class="page-item">
        <a class="page-link text-secondary" href="./1" disabled>First</a>
      </li>
      <% } else { %>
      <li class="page-item">
        <a class="page-link" href="./1">First</a>
      </li>
      <% } %> <% let i = (Number(paginate.currentPage) > 5 ? Number(paginate.currentPage) - 4 : 1) %> <% if (i !== 1) { %>
      <li class="page-item"><a class="page-link text-secondary" disabled>...</a></li>
      <% } %> <% for (; i <= (Number(paginate.currentPage) + 4) && i <= paginate.totalPages; i++) { %> <% if (i == paginate.currentPage) { %>
      <li class="page-item"><a class="page-link text-secondary" disabled><%= i %></a></li>
      <% } else { %>
      <li class="page-item"><a class="page-link" href="./<%= i %>"><%= i %></a></li>
      <% } %> <% if (i == Number(paginate.currentPage) + 4 && i < paginate.totalPages) { %>
      <li class="page-item"><a class="page-link text-secondary" disabled>...</a></li>
      <% } %> <% } %> <% if (paginate.currentPage == paginate.totalPages) { %>
      <li class="page-item">
        <a class="page-link text-secondary" href="./<%= paginate.totalPages %>" disabled>Last</a>
      </li>
      <% } else { %>
      <li class="page-item">
        <a class="page-link" href="./<%= paginate.totalPages %>">Last</a>
      </li>
      <% } %>
    </ul>
  </div>
</section>
